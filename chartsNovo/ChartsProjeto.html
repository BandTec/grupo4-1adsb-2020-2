<!doctype html>
<link rel="stylesheet" href="css/style.css">
<html >

<head>
    <meta charset="UTF-8">
    <title>Valor atual em tempo real</title>
</head>


<body>
    <input type="checkbox" id="chec">
    <label for="chec" >
        <img src="../chartsNovo/IMG/icone_menu.png" alt="">
    </label>
    <nav>
        <ul>
            <li><a href=""><b>Setor A</b> </a></li>
            <li><a href=""><b>Setor B</b></a></li>
            <li><a href=""><b>Setor C</b></a></li>
            <li><a href=""><b>Setor D</b></a></li>
            <li><a href=""><b>Setor E</b></a></li>
            <li><a href=""><b>Setor F</b></a></li>
        </ul>
    </nav>
<div class="back">
    <br><br><br><h1>Seja Bem vindo a central de controle do Health Analytics!</h1><br><br><br>

<div class="margin">
<div id="b" ></div>
</div>
</div>
</body> 
</html>

<script>
    //Variáveis globais
    var limiteMax = 39.9;
    var limiteMin = 34.5;
    var contador = 0;
    var nomes = ['Natan','Samuel','Jailson','Winicius','Kaue','Mauricio','Brandão','Kaline','Leonardo','Thiago']
	
    function receberNovasLeituras() {
        temperatura = (Math.random() * (limiteMax-limiteMin) + limiteMin).toFixed(1);
        // O if é criado fora, para criar o looping. Então ele limita a quantidade de 'inserções'.
        if(contador < 10){
            setTimeout(() => {
                //O id está sendo incrementado parra que ele não dê conflito com uma medição anterior.
                b.innerHTML += `<div id="card${contador}" class="card"> ${nomes[contador]} <br> ${temperatura}°C</div>`;
                // O document.getElementeById vai fazer com que a var car, se torne um elemento HTML e consiga fazer a concatenação do contador com o id da variável
                var card = document.getElementById(`card${contador}`);

                //Aqui cé configurado o range de temperatura onde o fundo fica colorido de acordo com a oscilação da temperatura aferida.
                if(temperatura >= 33 && temperatura <= 35){
                    card.style.background = 'rgb(18, 54, 175)';
                } else if(temperatura > 35 && temperatura <= 38){
                    card.style.background = 'rgb(0, 255, 0)';
                } else {
                    card.style.background = 'rgb(192, 31, 31)';
                }
                //incrementa o contador para continuar o looping.
                contador++;
                // chama a função novamente
                receberNovasLeituras();	    
            },500); // 3000 ms -> 3 segundos

        }
    }
	// indicando que a função "receberNovasLeituras" será invocada assim que a página carregar
    window.onload = receberNovasLeituras;
</script>